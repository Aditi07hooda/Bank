<div class="my-5">
  <!-- Profile Card -->
  <div *ngIf="userPresent; else noAccount">
    <ng-container *ngIf="myAcc$ | async as myAcc">
      <div
        class="max-w-sm mx-auto mt-10 bg-gray-800 rounded-2xl shadow-lg overflow-hidden border border-gray-700"
      >
        <div class="bg-gradient-to-r from-indigo-600 to-purple-700 p-6">
          <div class="flex items-center space-x-4">
            <div
              class="w-16 h-16 bg-gray-900 rounded-full flex items-center justify-center text-2xl font-bold text-indigo-400 shadow-inner"
            >
              {{ myAcc.account.name[0] }}
            </div>
            <div>
              <h2 class="text-white text-xl font-semibold">
                {{ myAcc.account.name }}
              </h2>
              <p class="text-indigo-200 text-sm">
                User ID: #{{ myAcc.account.id }}
              </p>
            </div>
          </div>
        </div>
        <div class="p-6">
          <div class="flex justify-between items-center mb-4 text-gray-300">
            <span>Age:</span>
            <span class="font-semibold text-white">{{
              myAcc.account.age
            }}</span>
          </div>
          <div class="flex justify-between items-center mb-4 text-gray-300">
            <span>Balance:</span>
            <span class="text-green-400 font-bold text-lg"
              >â‚¹{{ myAcc.account.balance }}</span
            >
          </div>
          <button
            class="w-full mt-4 bg-indigo-600 hover:bg-indigo-700 text-white py-2 px-4 rounded-lg font-medium transition"
            (click)="beginEditing()"
          >
            Edit Profile
          </button>
        </div>
      </div>
    </ng-container>
  </div>

  <ng-template #noAccount>
    <!-- Account Creation & Login -->
    <div
      class="flex flex-col md:flex-row justify-center items-start gap-6 my-10"
    >
      <!-- Create Account -->
      <div class="max-w-md w-full p-6 bg-gray-800 rounded-lg shadow-md">
        <p class="text-xl font-bold text-white text-center mb-5">
          Create Account
        </p>
        <div
          *ngIf="success"
          class="mb-4 px-4 py-2 rounded bg-green-600 text-white text-sm text-center animate-fade-in-out"
        >
          Account created successful!.
        </div>
        <div
          *ngIf="error"
          class="mb-4 px-4 py-2 rounded bg-red-600 text-white text-sm text-center animate-fade-in-out"
        >
          {{ error }}
        </div>
        <form (ngSubmit)="createAccount()" #accForm="ngForm">
          <div class="mb-4">
            <label class="block text-sm font-medium text-gray-300"
              >Name<span class="text-red-500">*</span> :</label
            >
            <input
              id="name"
              type="text"
              name="name"
              [(ngModel)]="data.name"
              class="w-full p-2 mt-1 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
            />
            <div
              *ngIf="!data.name || data.name.length < 3"
              class="text-red-500 text-xs mt-1"
            >
              <small>Name is required (min 3 characters)</small>
            </div>
          </div>
          <div class="mb-4">
            <label class="block text-sm font-medium text-gray-300"
              >Age<span class="text-red-500">*</span> :</label
            >
            <input
              id="age"
              type="number"
              name="age"
              [(ngModel)]="data.age"
              class="w-full p-2 mt-1 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
            />
            <div
              *ngIf="!data.age || data.age < 18"
              class="text-red-500 text-xs mt-1"
            >
              <small>Age is required (min 18)</small>
            </div>
          </div>
          <div class="mb-4">
            <label class="block text-sm font-medium text-gray-300"
              >Balance<span class="text-red-500">*</span> :</label
            >
            <input
              id="balance"
              type="number"
              name="balance"
              [(ngModel)]="data.balance"
              class="w-full p-2 mt-1 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
            />
            <div
              *ngIf="!data.balance || data.balance < 0"
              class="text-red-500 text-xs mt-1"
            >
              <small>Balance is required (min 0)</small>
            </div>
          </div>
          <div class="mb-4">
            <label class="block text-sm font-medium text-gray-300"
              >Password<span class="text-red-500">*</span> :</label
            >
            <input
              id="password"
              type="password"
              name="password"
              [(ngModel)]="data.password"
              class="w-full p-2 mt-1 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
            />
            <div
              *ngIf="!data.password || data.password.length < 5"
              class="text-red-500 text-xs mt-1"
            >
              <small>Password is required.(Min length 5) </small>
            </div>
          </div>
          <button
            type="submit"
            class="w-full py-2 mt-4 bg-blue-600 hover:bg-blue-700 text-white rounded-md cursor-pointer"
          >
            Create
          </button>
        </form>
      </div>

      <!-- Login -->
      <div class="max-w-md w-full p-6 bg-gray-800 rounded-lg shadow-md">
        <p class="text-xl font-bold text-white text-center mb-5">
          Already have an Account?
        </p>
        <div
          *ngIf="success"
          class="mb-4 px-4 py-2 rounded bg-green-600 text-white text-sm text-center animate-fade-in-out"
        >
          Login successful!.
        </div>
        <div
          *ngIf="error"
          class="mb-4 px-4 py-2 rounded bg-red-600 text-white text-sm text-center animate-fade-in-out"
        >
          {{ error }}
        </div>
        <div class="mb-4">
          <label class="block text-sm font-medium text-gray-300"
            >Name<span class="text-red-500">*</span> :</label
          >
          <input
            id="loginName"
            type="text"
            name="loginName"
            [(ngModel)]="loginName"
            class="w-full p-2 mt-1 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
          />
        </div>
        <div class="mb-4">
          <label class="block text-sm font-medium text-gray-300"
            >Password<span class="text-red-500">*</span> :</label
          >
          <input
            id="loginPassword"
            type="password"
            name="loginPassword"
            [(ngModel)]="password"
            class="w-full p-2 mt-1 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
          />
        </div>
        <button
          type="submit"
          class="w-full py-2 mt-4 bg-blue-600 hover:bg-blue-700 text-white rounded-md cursor-pointer"
          (click)="getAccount()"
        >
          Login
        </button>
      </div>
    </div>
  </ng-template>
</div>
