<div class="bg-white dark:bg-gray-900 p-6 rounded shadow-md">
  <h2 class="text-2xl font-bold text-blue-600 dark:text-blue-400 mb-4">üè† Home Loan Requests</h2>
  <div *ngIf="error" class="mb-4 px-4 py-2 rounded bg-red-100 text-red-700 border border-red-400 dark:bg-red-800 dark:text-red-100">
    {{ error }}
  </div>
  <div *ngIf="success" class="mb-4 px-4 py-2 rounded bg-green-100 text-green-700 border border-green-400 dark:bg-green-800 dark:text-green-100">
    {{ success }}
  </div>
  <table class="min-w-full divide-y divide-gray-300 dark:divide-gray-700">
    <thead class="bg-gray-100 dark:bg-gray-800">
      <tr>
        <th class="px-4 py-2 text-left text-sm font-semibold">ID</th>
        <th class="px-4 py-2 text-left text-sm font-semibold">User ID</th>
        <th class="px-4 py-2 text-left text-sm font-semibold">Amount</th>
        <th class="px-4 py-2 text-left text-sm font-semibold">Purpose</th>
        <th class="px-4 py-2 text-left text-sm font-semibold">Terms</th>
        <th class="px-4 py-2 text-left text-sm font-semibold">Property</th>
        <th class="px-4 py-2 text-left text-sm font-semibold">Status</th>
        <th class="px-4 py-2 text-left text-sm font-semibold">Actions</th>
      </tr>
    </thead>
    <tbody class="divide-y divide-gray-200 dark:divide-gray-700">
      <tr *ngFor="let req of homeLoanreq">
        <td class="px-4 py-3">{{ req.id }}</td>
        <td class="px-4 py-3">{{ req.userId }}</td>
        <td class="px-4 py-3 text-blue-600 dark:text-blue-400">Rs. {{ req.amount }}</td>
        <td class="px-4 py-3">{{ req.purpose }}</td>
        <td class="px-4 py-3">{{ req.terms }} years</td>
        <td class="px-4 py-3">
          {{ req.propertyName }}<br />
          <span class="text-xs text-gray-500">{{ req.propertyAddress }}</span>
        </td>
        <td class="px-4 py-3">
          <span
            [ngClass]="{
              'text-yellow-500': req.status === 0,
              'text-green-500': req.status === 1,
              'text-red-500': req.status === -1
            }"
          >
            {{
              req.status === 0
                ? 'Pending'
                : req.status === 1
                ? 'Approved'
                : 'Rejected'
            }}
          </span>
        </td>
        <td class="flex flex-wrap space-y-3 px-4 py-3 space-x-2">
          <button
            class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded cursor-pointer"
            (click)="viewPdf(req.proofOfProperty ?? null)"
          >
            View PDF
          </button>
          <button
            class="bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded cursor-pointer"
            (click)="approveRequest(req.id)"
            [disabled]="req.status !== 0"
          >
            Approve
          </button>
          <button
            class="bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded cursor-pointer"
            (click)="rejectRequest(req.id)"
            [disabled]="req.status !== 0"
          >
            Reject
          </button>
        </td>
      </tr>
    </tbody>
  </table>

  <div *ngIf="homeLoanreq?.length === 0" class="text-center mt-6 text-gray-500 dark:text-gray-400">
    No loan requests available.
  </div>
</div>
